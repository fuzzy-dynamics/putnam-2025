# Putnam 2025 A3 - Solution

## Answer

**Bob wins for all $n \geq 1$.**

## Solution

We exhibit an explicit winning strategy for Bob using a pairing argument.

### The Pairing

**Definition:** For any string $s = (s_1, \ldots, s_n) \neq 0^n$, let $i$ be the smallest index such that $s_i \neq 0$. Define:
$$\mathrm{pair}(s) = (s_1, \ldots, s_{i-1}, 3 - s_i, s_{i+1}, \ldots, s_n)$$

This swaps the first non-zero digit between $1 \leftrightarrow 2$.

**Examples for $n = 2$:**

| String $s$ | First non-zero position | $\mathrm{pair}(s)$ |
|------------|------------------------|------------------|
| 10 | 1 | 20 |
| 20 | 1 | 10 |
| 01 | 2 | 02 |
| 02 | 2 | 01 |
| 11 | 1 | 21 |
| 21 | 1 | 11 |
| 12 | 1 | 22 |
| 22 | 1 | 12 |

### Properties of the Pairing

**Property 1:** The pairing is well-defined on all non-zero strings.

*Proof:* Every non-zero string has at least one non-zero digit, so the first non-zero index $i$ exists.

**Property 2:** $\mathrm{pair}(s) \neq s$ for all $s \neq 0^n$.

*Proof:* At position $i$, we have $s_i \in \{1, 2\}$ and $3 - s_i \in \{2, 1\}$. Since $s_i \neq 3 - s_i$, the strings differ.

**Property 3:** $\mathrm{pair}(s) \neq 0^n$ for all $s \neq 0^n$.

*Proof:* Position $i$ in $\mathrm{pair}(s)$ contains $3 - s_i \in \{1, 2\} \neq 0$.

**Property 4:** The pairing is an involution: $\mathrm{pair}(\mathrm{pair}(s)) = s$.

*Proof:* Let $i$ be the first non-zero position of $s$. Then $\mathrm{pair}(s)$ also has its first non-zero position at $i$ (since positions $1, \ldots, i-1$ are unchanged and position $i$ becomes $3 - s_i \neq 0$). Applying pair again: $3 - (3 - s_i) = s_i$.

**Property 5:** The pairing partitions the $3^n - 1$ non-zero strings into $(3^n - 1)/2$ pairs.

*Proof:* Since the pairing is an involution with no fixed points (Property 2), it partitions the set into 2-cycles. The count $(3^n - 1)/2$ is an integer since $3^n$ is odd.

**Property 6 (Crucial):** $s$ and $\mathrm{pair}(s)$ are neighbors in the game graph.

*Proof:* The strings $s$ and $\mathrm{pair}(s)$ differ only in position $i$. The difference at position $i$ is:
$$|s_i - (3 - s_i)| = |2s_i - 3| = \begin{cases} 1 & \text{if } s_i = 1 \\ 1 & \text{if } s_i = 2 \end{cases}$$

So they differ by exactly $\pm 1$ in exactly one coordinate, making them adjacent.

### Bob's Strategy

**Strategy:** Whenever Alice moves to state $u$, Bob moves to $\mathrm{pair}(u)$.

### Proof that Bob Always Has a Legal Move

**Invariant:** After each of Bob's moves (and at the start of the game), the set of visited non-zero states consists entirely of complete pairs.

**Base case:** Initially, only $0^n$ is visited. The set of visited non-zero states is empty, so the invariant holds vacuously.

**Inductive step:** Assume the invariant holds after Bob's $k$-th move. Consider Alice's $(k+1)$-th move to some state $u$.

1. Since $u$ is a legal move, $u$ has not been visited before.

2. Since moves change exactly one digit by $\pm 1$, and we started at $0^n$, we have $u \neq 0^n$ (Alice moved away from some visited state).

3. **Claim:** $\mathrm{pair}(u)$ has not been visited.

   *Proof:* Suppose for contradiction that $\mathrm{pair}(u)$ has been visited. By the invariant, all visited non-zero states come in complete pairs. Since $\mathrm{pair}(u)$ is visited and non-zero, its pair--which is $\mathrm{pair}(\mathrm{pair}(u)) = u$--must also be visited. But $u$ is unvisited (Alice just moved there legally). Contradiction.

4. By Property 6, $\mathrm{pair}(u)$ is a neighbor of $u$.

5. Therefore, Bob can legally move from $u$ to $\mathrm{pair}(u)$.

6. After Bob's move, the visited non-zero states are the previous ones plus $\{u, \mathrm{pair}(u)\}$--a complete pair. The invariant is restored.

### Conclusion

By induction, Bob can always respond to any move Alice makes. Since the game state space is finite ($3^n$ states) and no state can be revisited, the game must eventually end. The game ends when some player has no legal move. Since Bob can always respond whenever Alice moves, it must be Alice who eventually has no legal move.

**Therefore, Bob wins for all $n \geq 1$.**

## Illustration

### $n = 1$
- States: $\{0, 1, 2\}$
- Pairing: $1 \leftrightarrow 2$
- Game trace:
  - Start at $0$
  - Alice moves to $1$ (or $2$). Say she moves to $1$.
  - Bob moves to $\mathrm{pair}(1) = 2$.
  - Alice is at $2$. Neighbors: $1$ (visited). No legal moves.
- **Bob wins.**

### $n = 2$
- States: $3^2 = 9$ strings
- Pairing: $01 \leftrightarrow 02$, $10 \leftrightarrow 20$, $11 \leftrightarrow 21$, $12 \leftrightarrow 22$
- Game trace:
  - Start at $00$
  - Alice $\to$ $10$. Bob $\to$ $20$.
  - Alice $\to$ $21$. Bob $\to$ $11$.
  - Alice $\to$ $01$. Bob $\to$ $02$.
  - Alice $\to$ $12$. Bob $\to$ $22$.
  - Alice at $22$, neighbors $12, 21$ both visited. No legal moves.
- **Bob wins.**
